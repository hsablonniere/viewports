var PubSub={};(function(a){function b(a,b,d){function f(){var d=c[a],f=function(a){return function(){throw a}},g,h;g=0;for(h=d.length;g<h;g++)try{d[g].func(a,b)}catch(i){setTimeout(f(i),0)}}return c.hasOwnProperty(a)?(!0===d?f():setTimeout(f,0),!0):!1}a.version="1.0.2";var c={},d=-1;a.publish=function(a,c){return b(a,c,!1)},a.publishSync=function(a,c){return b(a,c,!0)},a.subscribe=function(a,b){c.hasOwnProperty(a)||(c[a]=[]);var f=(++d).toString();return c[a].push({token:f,func:b}),f},a.unsubscribe=function(a){var b,d,f;for(b in c)if(c.hasOwnProperty(b)){d=0;for(f=c[b].length;d<f;d++)if(c[b][d].token===a)return c[b].splice(d,1),a}return!1}})(PubSub);(function(){var a=function(){function a(a){return(""+a).replace(/&(?!\w+;)|[<>"']/g,function(a){return g[a]||a})}var b=Object.prototype.toString;Array.isArray=Array.isArray||function(a){return"[object Array]"==b.call(a)};var c=String.prototype.trim,d;if(c)d=function(a){return null==a?"":c.call(a)};else{var e,f;/\S/.test("Â ")?(e=/^[\s\xA0]+/,f=/[\s\xA0]+$/):(e=/^\s+/,f=/\s+$/),d=function(a){return null==a?"":a.toString().replace(e,"").replace(f,"")}}var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h={},i=function(){};return i.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){d||(this.context=b,this.buffer=[]);if(this.includes("",a)){var a=this.render_pragmas(a),e=this.render_section(a,b,c);!1===e&&(e=this.render_tags(a,b,c,d));if(d)return e;this.sendLines(e)}else{if(d)return a;this.send(a)}},send:function(a){""!==a&&this.buffer.push(a)},sendLines:function(a){if(a)for(var a=a.split("\n"),b=0;b<a.length;b++)this.send(a[b])},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=this.getCachedRegex("render_pragmas",function(a,b){return RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+b,"g")});return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};return b.pragmas[c]={},d&&(a=d.split("="),b.pragmas[c][a[0]]=a[1]),""})},render_partial:function(a,b,c){a=d(a);if(!c||void 0===c[a])throw{message:"unknown_partial '"+a+"'"};return!b||"object"!=typeof b[a]?this.render(c[a],b,c,!0):this.render(c[a],b[a],c,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return!1;var d=this,e=this.getCachedRegex("render_section",function(a,b){return RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+b+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+b+"\\s*([\\s\\S]*)$","g")});return a.replace(e,function(a,e,f,g,h,i){var a=e?d.render_tags(e,b,c,!0):"",i=i?d.render(i,b,c,!0):"",j,g=d.find(g,b);return"^"===f?j=!g||Array.isArray(g)&&0===g.length?d.render(h,b,c,!0):"":"#"===f&&(j=Array.isArray(g)?d.map(g,function(a){return d.render(h,d.create_context(a),c,!0)}).join(""):d.is_object(g)?d.render(h,d.create_context(g),c,!0):"function"==typeof g?g.call(b,h,function(a){return d.render(a,b,c,!0)}):g?d.render(h,b,c,!0):""),a+j+i})},render_tags:function(b,c,d,e){for(var f=this,g=function(){return f.getCachedRegex("render_tags",function(a,b){return RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+b+"+","g")})},h=g(),i=function(b,e,i){switch(e){case"!":return"";case"=":return f.set_delimiters(i),h=g(),"";case">":return f.render_partial(i,c,d);case"{":case"&":return f.find(i,c);default:return a(f.find(i,c))}},b=b.split("\n"),j=0;j<b.length;j++)b[j]=b[j].replace(h,i,this),e||this.send(b[j]);if(e)return b.join("\n")},set_delimiters:function(a){a=a.split(" "),this.otag=this.escape_regex(a[0]),this.ctag=this.escape_regex(a[1])},escape_regex:function(a){return arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g")),a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function c(a){return!1===a||0===a||a}var a=d(a),e;if(a.match(/([a-z_]+)\./ig)){var f=this.walk_context(a,b);c(f)&&(e=f)}else c(b[a])?e=b[a]:c(this.context[a])&&(e=this.context[a]);return"function"==typeof e?e.apply(b):void 0!==e?e:""},walk_context:function(a,b){for(var c=a.split("."),d=void 0!=b[c[0]]?b:this.context,e=d[c.shift()];void 0!=e&&0<c.length;)d=e,e=e[c.shift()];return"function"==typeof e?e.apply(d):e},includes:function(a,b){return-1!=b.indexOf(this.otag+a)},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&"object"==typeof a},map:function(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],d=a.length,e=0;e<d;e++)c.push(b(a[e]));return c},getCachedRegex:function(a,b){var c=h[this.otag];c||(c=h[this.otag]={});var d=c[this.ctag];return d||(d=c[this.ctag]={}),(c=d[a])||(c=d[a]=b(this.otag,this.ctag)),c}},{name:"mustache.js",version:"0.4.0",to_html:function(a,b,c,d){var e=new i;d&&(e.send=d),e.render(a,b||{},c);if(!d)return e.buffer.join("\n")}}}();(function(){var b={VERSION:"0.10",templates:{},$:"undefined"!=typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(d,e){if("object"==typeof d)for(var f in d)this.addTemplate(f,d[f]);else b[d]?console.error("Invalid name: "+d+"."):b.templates[d]?console.error('Template "'+d+'  " exists'):(b.templates[d]=e,b[d]=function(e,f){var e=e||{},g=a.to_html(b.templates[d],e,b.templates);return b.$&&!f?b.$(g):g})},clearAll:function(){for(var a in b.templates)delete b[a];b.templates={}},refresh:function(){b.clearAll(),b.grabTemplates()},grabTemplates:function(){var a,d=document.getElementsByTagName("script"),e,f=[];for(a=0,l=d.length;a<l;a++)(e=d[a])&&e.innerHTML&&e.id&&("text/html"===e.type||"text/x-icanhaz"===e.type)&&(b.addTemplate(e.id,"".trim?e.innerHTML.trim():e.innerHTML.replace(/^\s+/,"").replace(/\s+$/,"")),f.unshift(e));for(a=0,l=f.length;a<l;a++)f[a].parentNode.removeChild(f[a])}};"undefined"!=typeof require?module.exports=b:window.ich=b,"undefined"!=typeof document&&(b.$?b.$(function(){b.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){b.grabTemplates()},!0))})()})();(function(){"use strict";var a=window,b=a.document;Object.prototype.createSimple=function(a){var b=Object.create(this),c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},a.dqs=function(){var a={};return function(c,d){if(!a.hasOwnProperty(c)||d===!0)a[c]=b.querySelector(c);return a[c]}}(),a.KeyboardEvent.prototype.keyName=function(){var a={38:"up",40:"down",39:"right",37:"left",33:"pageup",34:"pagedown"};return function(){var b=null;return a.hasOwnProperty(this.keyCode)?b=a[this.keyCode]:b=String.fromCharCode(this.keyCode),b+=this.shiftKey?"+shift":"",b+=this.ctrlKey?"+ctrl":"",b}}(),Array.prototype.pushOnce=function(a){this.indexOf(a)===-1&&this.push(a)},Array.prototype.sortNumeric=function(){var a=function(a,b){return a-b};return function(){this.sort(a)}}(),Array.prototype.closestAfter=function(a,b){if(b===!0&&this.indexOf(a)!==-1)return a;if(this.length===2)return this[1];var c=Math.floor(this.length/2);return a<this[c]?this.slice(0,c+1).closestAfter(a):this.slice(c,this.length).closestAfter(a)},Array.prototype.closestBefore=function(a,b){if(b===!0&&this.indexOf(a)!==-1)return a;if(this.length===2)return this[0];var c=Math.floor(this.length/2);return a<=this[c]?this.slice(0,c+1).closestBefore(a):this.slice(c,this.length).closestBefore(a)},String.prototype.completeBefore=function(a,b){return this.length>=b?this:(a+this).completeBefore(a,b)},function(){var c,d,e;c={webkitTransitionEnd:{proto:"WebKitTransitionEvent",init:"initEvent"},oTransitionEnd:{proto:"OTransitionEvent",init:"initTransitionEvent"}},d=function(d){var e=c[d.type].proto,f=c[d.type].init,g=b.createEvent(e);g[f]("transitionend",!0,!0,d.propertyName,d.elapsedTime),a.dispatchEvent(g)};for(e in c)c.hasOwnProperty(e)&&a.addEventListener(e,d,!1)}(),a.Element.prototype.scrollIntoViewIfNeeded||(a.Element.prototype.scrollIntoViewIfNeeded=function(a){var b=this.parentNode,c=this.offsetTop-b.offsetTop<b.scrollTop,d=this.offsetTop-b.offsetTop+this.clientHeight>b.scrollTop+b.clientHeight,e=c&&!d;if(c||d)a?b.scrollTop=this.offsetTop-b.offsetTop-b.clientHeight/2+this.clientHeight/2:this.scrollIntoView(e)})})();(function(){"use strict";var a=window,b=a.location;a.$viewports={getRootUrl:function(){return b.protocol+"//"+b.host+b.pathname}}})();(function(){"use strict";var a=window,b=a.PubSub,c=a.$viewports.protos={};c.value={name:"unknown",defaultValue:"",pattern:/^(.*)$/,converter:String,set value(a){a=this.parse(a),a!==null&&a!==this._value&&(this._value=a,b.publish(this.name+".change",a,!0))},get value(){return this._value},init:function(){this.value===undefined&&(this.value=this.defaultValue)},parse:function(a){var c=this.pattern.exec(a);return c!==null&&c[1]!==undefined?(a=this.converter(c[1]),a):(b.publish(this.name+".parseerror",a,!0),null)}},c.numericValue=c.value.createSimple({defaultValue:0,pattern:/^([0-9]+)$/,converter:Number,min:-Infinity,max:+Infinity,parse:function(a){return a=c.value.parse.call(this,a),!isNaN(a)&&this.min<=a&&a<=this.max?a:null},alter:function(a){this.value+=a}}),c.dualValue=c.value.createSimple({pattern:null,defaultValue:"0",a:"0",b:"1",parse:function(a){return this.pattern===null&&(this.pattern=new RegExp("^("+this.a+"|"+this.b+")$")),c.value.parse.call(this,a)},toggle:function(){this.value=this.value===this.a?this.b:this.a}}),c.dimensionValue=c.numericValue.createSimple({pattern:/^([0-9]+)(?:px)?$/,converter:parseInt,min:120,max:2560})})();(function(){"use strict";var a=window,b=a.PubSub,c=a.$viewports,d=c.protos,e;e=c.memory={url:d.value.createSimple({name:"url",pattern:/^(https?:\/\/(.*?)(?::[0-9]{1,5})?(?:\/.*)?)?$/,defaultValue:c.getRootUrl()+"help.html"}),scale:d.numericValue.createSimple({name:"scale",defaultValue:100,pattern:/^(([0-9]{1,3})(.([0-9]))?)%?$/,converter:function(a){return Number(Number(a).toFixed(1))},min:10,max:100}),height:d.dimensionValue.createSimple({name:"height",defaultValue:480}),width:d.dimensionValue.createSimple({name:"width",defaultValue:320}),panel:d.dualValue.createSimple({name:"panel",defaultValue:"1"}),controls:d.dualValue.createSimple({name:"controls",defaultValue:"1"}),autoscale:d.dualValue.createSimple({name:"autoscale",defaultValue:"1"}),filter:d.dualValue.createSimple({name:"filter",defaultValue:"favourites",a:"all",b:"favourites"}),hold:d.dualValue.createSimple({name:"hold",defaultValue:"0"}),orientation:{name:"orientation",a:"portrait",b:"landscape",set value(a){(this.value===this.a&&a===this.b||this.value===this.b&&a===this.a)&&this.toggle()},get value(){return e.height.value>e.width.value?this.a:this.b},toggle:function(){var a=e.height.value,b=e.width.value;e.height.value=b,e.width.value=a}},list:{name:"list",items:[],indexesByMin:[],indexesByMax:[],indexedItems:{},sizes:[],add:function(a){var b=a.size.min,c=a.size.max,d=this.getIndex(b,c),e=this.getIndex(c,b);this.items.pushOnce(a),this.indexesByMin.pushOnce(d),this.indexesByMin.sort(),this.indexedItems[d]=a,this.indexesByMax.pushOnce(e),this.indexesByMax.sort(),this.indexedItems[e]=a,this.sizes.pushOnce(Number(b)),this.sizes.pushOnce(Number(c)),this.sizes.sortNumeric()},getIndex:function(a,b){return String(a).completeBefore(" ",4)+String(b).completeBefore(" ",4)},set selectedItem(a){e.orientation.value==="portrait"?(e.height.value=a.size.max,e.width.value=a.size.min):(e.height.value=a.size.min,e.width.value=a.size.max)},get selectedItem(){return this.indexedItems[this.getIndex(e.height.value,e.width.value)]},get indexesByHeight(){return e.orientation.value==="portrait"?this.indexesByMax:this.indexesByMin},get indexesByWidth(){return e.orientation.value==="portrait"?this.indexesByMin:this.indexesByMax},closestBefore:function(a,b,c){var d=this.getIndex(b,c),e=a.closestBefore(d);return this.indexedItems[e]},closestAfter:function(a,b,c){var d=this.getIndex(b,c),e=a.closestAfter(d);return this.indexedItems[e]},toggleFavourite:function(a,c,d){var e=this.indexedItems[this.getIndex(a,c)];e.favourite=d||String(Number(!Boolean(Number(e.favourite)))),b.publish("favourite.change",e)}}},a.addEventListener("load",function(a){var b=["url","scale","height","width","panel","controls","autoscale","filter","hold"],c;for(c=0;c<b.length;c+=1)e[b[c]].init()},!1)})();(function(){"use strict";var a=window,b=a.PubSub,c=a.$viewports.memory,d;d=function(a,d){b.publish("orientation.change",c.orientation.value)},b.subscribe("height.change",d),b.subscribe("width.change",d)})();(function(){"use strict";var a=window,b=a.ich,c=a.PubSub,d=a.dqs,e=a.$viewports,f=e.memory,g;c.subscribe("list.load",function(a,g){var h;for(h=0;h<g.items.length;h+=1)f.list.add(g.items[h]);b.listTemplate||b.refresh(),f.list.items.sort(function(a,b){return a.size.min===b.size.min?a.size.max-b.size.max:a.size.min-b.size.min}),d("#list").innerHTML=b.listTemplate({items:f.list.items,getRootUrl:e.getRootUrl}),c.publish("list.loaded",f.list.indexedItems)}),d("#list").addEventListener("click",function(a){var b,c,d;a.target.classList.contains("orientation")&&(b=Number(a.target.dataset.sizeMin),c=Number(a.target.dataset.sizeMax),d=a.target.dataset.orientation,d==="portrait"?(f.height.value=c,f.width.value=b):(f.height.value=b,f.width.value=c))},!1),g=function(a,b){var c=Math.min(f.height.value,f.width.value),e=Math.max(f.height.value,f.width.value),g,h;g=d('.viewport[data-selected="1"]',!0),g!==null&&(g.dataset.selected="0"),h=d('.viewport[data-size-min="'+c+'"][data-size-max="'+e+'"]'),h!==null&&(h.scrollIntoViewIfNeeded(),h.dataset.selected="1")},c.subscribe("height.change",g),c.subscribe("width.change",g)})();window.PubSub.publish("list.load",{UPDATEDAT:1334702012936,items:[{name:"QQVGA",size:{min:"120",max:"160"},details:"",favourite:"0"},{name:"HQVGA",size:{min:"160",max:"240"},details:"",favourite:"0"},{name:"QVGA",size:{min:"240",max:"320"},details:"",favourite:"0"},{name:"WQVGA",size:{min:"240",max:"400"},details:"",favourite:"0"},{name:"HVGA",size:{min:"320",max:"480"},details:"",favourite:"1"},{name:"VGA",size:{min:"480",max:"640"},details:"",favourite:"0"},{name:"WVGA",size:{min:"480",max:"800"},details:"",favourite:"0"},{name:"SVGA",size:{min:"600",max:"800"},details:"",favourite:"0"},{name:"DVGA",size:{min:"640",max:"960"},details:"",favourite:"0"},{name:"WSVGA",size:{min:"576",max:"1024"},details:"",favourite:"0"},{name:"WSVGA",size:{min:"600",max:"1024"},details:"",favourite:"0"},{name:"XGA",size:{min:"768",max:"1024"},details:"",favourite:"1"},{name:"WXGA",size:{min:"720",max:"1280"},details:"",favourite:"0"},{name:"WXGA",size:{min:"768",max:"1280"},details:"",favourite:"0"},{name:"WXGA",size:{min:"800",max:"1280"},details:"",favourite:"0"},{name:"WXGA",size:{min:"768",max:"1360"},details:"",favourite:"0"},{name:"WXGA",size:{min:"768",max:"1366"},details:"",favourite:"1"},{name:"XGA+",size:{min:"864",max:"1152"},details:"",favourite:"0"},{name:"WXGA+",size:{min:"900",max:"1440"},details:"",favourite:"0"},{name:"SXGA",size:{min:"1024",max:"1280"},details:"",favourite:"1"},{name:"SXGA+",size:{min:"1050",max:"1400"},details:"",favourite:"0"},{name:"WSXGA+",size:{min:"1050",max:"1680"},details:"",favourite:"0"},{name:"UXGA",size:{min:"1200",max:"1600"},details:"",favourite:"0"},{name:"WUXGA",size:{min:"1200",max:"1920"},details:"",favourite:"1"},{name:"QWXGA",size:{min:"1152",max:"2048"},details:"",favourite:"0"},{name:"QXGA",size:{min:"1536",max:"2048"},details:"",favourite:"0"},{name:"WQXGA",size:{min:"1600",max:"2560"},details:"",favourite:"0"},{name:"QSXGA",size:{min:"2048",max:"2560"},details:"",favourite:"0"},{name:"nHD",size:{min:"360",max:"640"},details:"",favourite:"0"},{name:"qHD",size:{min:"540",max:"960"},details:"",favourite:"0"},{name:"HD",size:{min:"720",max:"1280"},details:"",favourite:"0"},{name:"HD+",size:{min:"900",max:"1600"},details:"",favourite:"0"},{name:"FHD",size:{min:"1080",max:"1920"},details:"",favourite:"0"},{name:"QHD",size:{min:"1440",max:"2560"},details:"",favourite:"0"}]});(function(){"use strict";var a=window,b=a.PubSub,c=a.PrefixFree,d=a.dqs;b.subscribe("url.change",function(a,b){d("#viewport").src=b}),b.subscribe("scale.change",function(a,b){b=(b/100).toFixed(3),d("#viewport-wrapper").style.setProperty(c.prefixProperty("transform"),"scale("+b+")","")}),b.subscribe("height.change",function(a,b){d("#viewport").style.setProperty("height",b+"px",""),b=Math.round(b/2),d("#viewport").style.setProperty("margin-top","-"+b+"px","")}),b.subscribe("width.change",function(a,b){d("#viewport").style.setProperty("width",b+"px",""),b=Math.round(b/2),d("#viewport").style.setProperty("margin-left","-"+b+"px","")})})();(function(){"use strict";var a=window,b=a.PubSub,c=a.dqs,d=a.$viewports.memory,e,f,g,h,i;e={url:{suffix:""},scale:{suffix:"%",toFixed:1},height:{suffix:"px"},width:{suffix:"px"}},f=function(a,b,d){c("#"+a+" input").value=d+b.suffix},g=function(a,e){b.subscribe(a+".change",function(b,d){isNaN(e.toFixed)||(d=d.toFixed(e.toFixed)),f(a,e,d),c("#"+a+" input").blur()}),b.subscribe(a+".parseerror",function(b,c){f(a,e,d[a].value)})},h=function(a,b){c("#"+a+" input").addEventListener("change",function(b){d[a].value=b.target.value},!1),c("#"+a+" input").addEventListener("focus",function(b){c("#"+a).classList.add("focused")},!1),c("#"+a+" input").addEventListener("blur",function(b){c("#"+a).classList.remove("focused")},!1)};for(i in e)e.hasOwnProperty(i)&&(g(i,e[i]),h(i,e[i]))})();(function(){"use strict";var a=window,b=a.PubSub,c=a.dqs,d=a.$viewports.memory,e,f,g=null,h,i=null,j;e={scale:{area:c("#scale"),cssProperty:"bottom"},height:{area:c("#height"),cssProperty:"bottom"},width:{area:c("#width"),cssProperty:"left"}},h=function(a,e){b.subscribe(a+".change",function(b,f){f=(f-d[a].min)*100/(d[a].max-d[a].min),c("#"+a+" .cursor").style.setProperty(e.cssProperty,f+"%","")})};for(f in e)e.hasOwnProperty(f)&&h(f,e[f]);e.scale.computeValue=e.height.computeValue=function(a,b,c){var d=(c.max-c.min)/this.area.clientHeight;return i!==null&&(b=i.clientY+(b-i.clientY)/(d*3)),c.max-(b-this.area.offsetTop)*d},j=c("#width .cursor").clientWidth-c("#width input").clientWidth-5,e.width.computeValue=function(a,b,e){var f=Boolean(Number(d.panel.value))?c("#panel").clientWidth:0,g=(e.max-e.min)/this.area.clientWidth;return i!==null&&(a=i.clientX+(a-i.clientX)/(g*3)),(a-this.area.offsetLeft-f-j)*g+e.min},a.addEventListener("mousedown",function(a){a.target.classList.contains("handle")&&(a.preventDefault(),g=a.target.title,d.hold.value="1",c("#mask").classList.add(g+"-resize"))},!1),a.addEventListener("mouseup",function(a){c("#mask").classList.remove(g+"-resize"),d.hold.value="0",g=null},!1),a.addEventListener("mousemove",function(a){var b,c,f,h,j;i===null&&a.altKey&&(i=a),i!==null&&!a.altKey&&(i=null),g!==null&&(b=d[g].min,c=d[g].max,f=e[g].computeValue(a.clientX,a.clientY,d[g]),f=Math.max(b,f),f=Math.min(f,c),f=d[g].converter(f),a.ctrlKey?(h=d.list.sizes.closestBefore(f,!0),j=d.list.sizes.closestAfter(f,!0),j-f>f-h?d[g].value=h:d[g].value=j):d[g].value=f)},!1)})();(function(){"use strict";var a=window,b=a.location,c=a.PubSub,d=a.$viewports.memory,e=b.hash,f=/^#[^=&]=[^=&]*(&[^=&]=[^=&]*)*$/,g,h,i,j=!0,k;g={u:"url",s:"scale",h:"height",w:"width",p:"panel",c:"controls",a:"autoscale",f:"filter"},i=function(a){var c,h,i={},j;if(e!==b.hash||a===!0){c=b.hash.slice(1).split("&");if(f.test(b.hash)){for(j=0;j<c.length;j+=1)h=c[j].split("="),i[h[0]]=decodeURIComponent(h[1]),d[g[h[0]]].value=i[h[0]];c.length!==Object.keys(g).length&&k()}}},a.addEventListener("hashchange",i,!1),k=function(){var a,c;if(j){a=[];for(c in g)g.hasOwnProperty(c)&&a.push(c+"="+encodeURIComponent(d[g[c]].value));a="#"+a.join("&"),a!==b.hash&&(e=b.hash=a)}};for(h in g)g.hasOwnProperty(h)&&(c.subscribe(g[h]+".change",k),c.subscribe(g[h]+".parseerror",k));c.subscribe("hold.change",function(a,b){j=!Boolean(Number(b)),j&&k()}),a.addEventListener("load",function(a){i(!0)},!1)})();(function(){"use strict";var a=window,b=a.document,c=a.PubSub,d=a.$viewports.memory,e=["url","height","width"],f=!0,g,h;g=function(){if(f){var a=d.width.value,c=d.height.value,e=d.url.pattern.exec(d.url.value)[2];b.title=a+"x"+c+" - "+e+" - Viewports"}};for(h=0;h<e.length;h+=1)c.subscribe(e[h]+".change",g);c.subscribe("hold.change",function(a,b){f=!Boolean(Number(b)),f&&g(!0)}),a.addEventListener("load",function(a){g()},!1)})();(function(){"use strict";var a=window,b=a.$viewports.memory,c;c={pageup:function(){b.scale.alter(1)},"pageup+shift":function(){b.scale.alter(10)},pagedown:function(){b.scale.alter(-1)},"pagedown+shift":function(){b.scale.alter(-10)},up:function(){b.height.alter(1)},"up+ctrl":function(){b.height.value=b.list.sizes.closestAfter(b.height.value)},"up+shift":function(){b.height.alter(10)},"up+shift+ctrl":function(){b.list.selectedItem=b.list.closestAfter(b.list.indexesByHeight,b.height.value,b.width.value)},down:function(){b.height.alter(-1)},"down+ctrl":function(){b.height.value=b.list.sizes.closestBefore(b.height.value)},"down+shift":function(){b.height.alter(-10)},"down+shift+ctrl":function(){b.list.selectedItem=b.list.closestBefore(b.list.indexesByHeight,b.height.value,b.width.value)},right:function(){b.width.alter(1)},"right+ctrl":function(){b.width.value=b.list.sizes.closestAfter(b.width.value)},"right+shift":function(){b.width.alter(10)},"right+shift+ctrl":function(){b.list.selectedItem=b.list.closestAfter(b.list.indexesByWidth,b.width.value,b.height.value)},left:function(){b.width.alter(-1)},"left+ctrl":function(){b.width.value=b.list.sizes.closestBefore(b.width.value)},"left+shift":function(){b.width.alter(-10)},"left+shift+ctrl":function(){b.list.selectedItem=b.list.closestBefore(b.list.indexesByWidth,b.width.value,b.height.value)},O:function(){b.hold.value="0",b.orientation.toggle()},P:function(){b.hold.value="0",b.panel.toggle()},C:function(){b.hold.value="0",b.controls.toggle()},A:function(){b.hold.value="0",b.autoscale.toggle()},F:function(){b.hold.value="0",b.filter.toggle()}},a.addEventListener("keydown",function(a){if(a.target.nodeName==="INPUT")return;b.hold.value="1";var d=a.keyName();c[d]!==undefined&&(c[d](),a.preventDefault())},!1),a.addEventListener("keyup",function(a){var d=a.keyName();c[d]!==undefined&&(b.hold.value="0")},!1)})();(function(){"use strict";var a=window,b=a.PubSub,c=a.dqs,d=a.$viewports.memory,e,f,g,h;e={orientation:"both",panel:"toggle",controls:"toggle",autoscale:"toggle",filter:"both",hold:"nobutton"},f=function(a){b.subscribe(a+".change",function(b,d){c("body").dataset[a]=d})},g=function(a){e[a]==="both"&&(c("#"+a+"-"+d[a].a).addEventListener("click",function(b){d[a].value=d[a].a},!1),c("#"+a+"-"+d[a].b).addEventListener("click",function(b){d[a].value=d[a].b},!1)),e[a]==="toggle"&&c("#"+a+"-switch").addEventListener("click",function(b){d[a].toggle()},!1)};for(h in e)e.hasOwnProperty(h)&&(f(h),g(h));b.subscribe("url.change",function(a,b){c("#url a").href=b})})();(function(){"use strict";var a=window,b=a.dqs,c=a.$viewports.getRootUrl;a.addEventListener("click",function(a){a.target.dataset!==null&&a.target.dataset.bookmarklet==="only"&&a.preventDefault()},!1),a.addEventListener("load",function(a){b("h1 a").href='javascript:(function(){location.href="'+c()+'#u="+encodeURIComponent(location.href)})()'},!1)})();(function(){"use strict";var a=window,b=a.PubSub,c=a.dqs,d=a.$viewports.memory,e=["height","width","panel","controls"],f,g;f=function(a){var b,e,f,g,h;Boolean(Number(d.autoscale.value))&&(b=c("#viewport-wrapper").clientHeight,e=c("#viewport-wrapper").clientWidth,f=d.height.value,g=d.width.value,h=d.scale.value,f>b||g>e?(f-b)/f>(g-e)/g?h=b/f*100:h=e/g*100:h=100,h=d.scale.converter(h),d.scale.value=h)};for(g=0;g<e.length;g+=1)b.subscribe(e[g]+".change",f);a.addEventListener("resize",f,!1),a.addEventListener("transitionend",f,!1)})();(function(){"use strict";var a=window,b=a.dqs,c=a.PubSub,d=a.$viewports.memory;b("#list").addEventListener("click",function(a){a.target.classList.contains("favourite")&&d.list.toggleFavourite(a.target.dataset.sizeMin,a.target.dataset.sizeMax)},!1),c.subscribe("favourite.change",function(a,c){var e=c.size.min,f=c.size.max,g=c.favourite,h;h=b('.viewport[data-size-min="'+e+'"][data-size-max="'+f+'"]'),h!==null&&(h.dataset.favourite=g),localStorage.setItem("viewports."+d.list.getIndex(e,f)+".favourite",g)}),c.subscribe("list.loaded",function(a,b){var c,e;for(c in b)b.hasOwnProperty(c)&&(e=localStorage.getItem("viewports."+c+".favourite"),e!==null&&d.list.toggleFavourite(b[c].size.min,b[c].size.max,e))},!1)})();