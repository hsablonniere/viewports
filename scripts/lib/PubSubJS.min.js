var PubSub={};(function(d){function f(a,b,c){function d(){var c=e[a],f=function(a){return function(){throw a;}},g,i;g=0;for(i=c.length;g<i;g++)try{c[g].func(a,b)}catch(h){setTimeout(f(h),0)}}if(!e.hasOwnProperty(a))return!1;!0===c?d():setTimeout(d,0);return!0}d.version="1.0.2";var e={},h=-1;d.publish=function(a,b){return f(a,b,!1)};d.publishSync=function(a,b){return f(a,b,!0)};d.subscribe=function(a,b){e.hasOwnProperty(a)||(e[a]=[]);var c=(++h).toString();e[a].push({token:c,func:b});return c};d.unsubscribe=function(a){var b,c,d;for(b in e)if(e.hasOwnProperty(b)){c=0;for(d=e[b].length;c<d;c++)if(e[b][c].token===a)return e[b].splice(c,1),a}return!1}})(PubSub);